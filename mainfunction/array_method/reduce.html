<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>one of the most powerful and versatile array methods.
        reduce() ဆိုတာ array တစ်ခုထဲက တန်ဖိုးတွေကို single value တစ်ခုအဖြစ် ပြောင်းပေးတဲ့ method ပါ။
    </h1>
    <p>let result = array.reduce(function(accumulator, currentValue, currentIndex, array) {
        // logic to modify the accumulator
      }, initialValue);</p>

      <h4>Initial value ထည့်ပေးတာ ကောင်းပါတယ်
        Array ဟာ empty ဖြစ်နေရင် error မဖြစ်အောင် initial value ထည့်ပေးသင့်တယ်
        Complex calculations တွေအတွက် readable ဖြစ်အောင် ရေးသင့်တယ်
        Chaining နဲ့တွဲသုံးတဲ့အခါ performance ကို ထည့်စဉ်းစားသင့်တယ်</h4>

        <script>
            const nums = [1, 2, 3, 4, 5];
            const sum = nums.reduce((total,current) =>  total + current, 0);
            console.log(sum);

            console.log("***********************");

            const cart = [
                {name : "book", price: 100,quantity: 2},
                {name : "pen", price: 50,quantity: 3},
                {name : "pencil", price: 20,quantity: 1},
                {name : "eraser", price: 10,quantity: 5},
                {name : "notebook", price: 50,quantity: 1},
            ];

            const totalAmount = cart.reduce((total,item) => {
                return total +(item.price * item.quantity);
            },0);

            console.log(totalAmount);
            
            const totalItems = cart.reduce((total,item) => {
                return total + item.quantity;
            },0);
            console.log(totalItems);

            console.log("***********************");

            const students = [
                {name:"aung",grade:"Grade A"},
                {name:"su",grade:"Grade B"},
                {name:"kyaw",grade:"Grade B"},
                {name:"mya",grade:"Grade D"},
                {name:"zaw",grade:"Grade E"},
            ];

            const groupByGrade = students.reduce((groups,student) => {
                if(!groups[student.grade]){
                    groups[student.grade] = [];
                }
                groups[student.grade].push(student);
                return groups;
            },{});

            console.log(groupByGrade);
            
            console.log("***********************");

            const text = "hello world hello javascript";
            const wordCount = text.split(" ").reduce((count,word) => {
                count[word] = (count[word] || 0) + 1;
                return count;
            },{});
            console.log(wordCount);

            console.log("***********************");

            const scores = [85, 90, 78, 92, 88, 76, 95, 89, 82, 91];
            const gradeCount = scores.reduce ((grades,score) => {
                if(score >= 90) grades.A = (grades.A || 0) + 1;
                else if (score >= 80) grades.B = (grades.B || 0) + 1;
                else if (score >= 70) grades.C = (grades.C || 0) + 1;
                else grades.D = (grades.D || 0) + 1;
                return grades;
            },{});

            console.log(gradeCount);

            console.log("***********************");

            const apiResponse = [
                {id:1,name:"aung",age:20},
                {id:2,name:"su",age:21},
                {id:3,name:"kyaw",age:22},
                {id:4,name:"mya",age:23},
                {id:5,name:"zaw",age:24},
            ];
            const formattedData = apiResponse.reduce((result,item) => {
                result[item.id] = {
                    name:item.name,
                    age:item.age
                };
                return result;
            },{});

            console.log(formattedData);

            console.log("***********************");

            const savings = [
                {month:"Jan",amount:1000},
                {month:"Feb",amount:1500},
                {month:"Mar",amount:2000},
                {month:"Apr",amount:1800},
                {month:"May",amount:2500},
            ];
            
            const savingAnalysis = savings.reduce((analysis,month) => {
                analysis.total += month.amount;
                analysis.average = analysis.total / (analysis.count + 1);

                if(month.amount > (analysis.highest?.amount || 0)) {
                    analysis.highest = month;
                }
                if(!analysis.lowest || month.amount < analysis.lowest.amount){
                    analysis.lowest = month;
                }
                analysis.count++;
                return analysis;
            },{
                total:0,
                average:0,
                highest:null,
                lowest:null,
                count:0
            });
            console.log(savingAnalysis);

            console.log("***********************");














        </script>
</body>
</html>